# .gitignore Security Guide

**Last Updated:** November 5, 2025
**Purpose:** Comprehensive guide to prevent sensitive data from being committed to Git

---

## üîí Protected File Types

This `.gitignore` is configured to protect the following types of sensitive data:

### 1. Environment Variables & Configuration
```
‚úÖ .env, .env.*, .env.local, .env.production
‚úÖ config.local.*, config.*.local
‚úÖ All *.env files
```

**Why:** Environment files contain API keys, database credentials, and other secrets.

### 2. Secrets & Credentials
```
‚úÖ All files in secrets/, keys/ directories
‚úÖ *.key, *.pem, *.crt, *.p12, *.pfx files
‚úÖ service-account*.json, *-credentials.json
‚úÖ SSH keys (*_rsa, *_dsa, *_ecdsa, *_ed25519)
‚úÖ Files with 'password', 'secret', 'token' in name
```

**Why:** These contain authentication credentials and encryption keys.

### 3. Cloud Provider Credentials
```
‚úÖ .aws/, .gcp/, .azure/ directories
‚úÖ AWS credentials, GCP service accounts, Azure configs
```

**Why:** Cloud credentials grant access to infrastructure.

### 4. API Keys & Tokens
```
‚úÖ Files matching: *apikey*, *api-key*, *api_key*
‚úÖ Files matching: *bearer*, *auth-token*, *auth_token*
‚úÖ APIKEY*, API_KEY* files
```

**Why:** API keys provide access to third-party services.

### 5. Database Connection Strings
```
‚úÖ Files matching: *database-url*, *connection-string*
‚úÖ DATABASE_URL*, CONNECTION_STRING* files
```

**Why:** Database URLs contain credentials and server locations.

### 6. Documentation with Credentials
```
‚úÖ README.md
‚úÖ GETTING_STARTED.md
‚úÖ QUICK_START.md
‚úÖ SIMPLE_SETUP.md
‚úÖ TESTING_QUICKSTART.md
```

**Why:** Setup guides often include example credentials that may be real.

**Exception:** Template files are allowed:
```
‚úÖ README.template.md (allowed)
‚úÖ .env.example (allowed)
‚úÖ .env.template (allowed)
```

### 7. Test Scripts with Credentials
```
‚úÖ test-*.sh, test_*.py
‚úÖ *-test-live.js, *-test-prod.js
```

**Why:** Test scripts may contain real credentials for testing against live services.

### 8. Local Development Overrides
```
‚úÖ local.settings.json
‚úÖ appsettings.local.json
‚úÖ appsettings.*.local.json
‚úÖ .npmrc, .yarnrc, .pnpmrc
```

**Why:** Local configs often have developer-specific credentials.

### 9. Backup Files
```
‚úÖ *.bak, *.backup, *.old, *.orig, *~
```

**Why:** Backups may contain old credentials.

---

## üìã Quick Security Checklist

Before committing, ensure:

- [ ] No `.env` files are staged
- [ ] No files with "password", "secret", "token" in the name
- [ ] No service account JSON files
- [ ] No SSH private keys
- [ ] No API keys in code or docs
- [ ] README files don't contain real credentials
- [ ] Test scripts use environment variables, not hardcoded values

---

## üö® What to Do If You Accidentally Commit Secrets

### 1. Remove from Git History (if not pushed)
```bash
git reset HEAD~1  # Undo last commit
git rm --cached <filename>  # Unstage the file
```

### 2. If Already Pushed to GitHub
```bash
# Use BFG Repo-Cleaner or git-filter-repo
git filter-repo --path <filename> --invert-paths
git push --force
```

### 3. Rotate All Exposed Credentials
- [ ] Rotate API keys
- [ ] Change database passwords
- [ ] Regenerate service account keys
- [ ] Update environment variables
- [ ] Revoke exposed tokens

---

## üõ°Ô∏è Best Practices

### 1. Use Environment Variables
**‚ùå Bad:**
```javascript
const apiKey = "sk-1234567890abcdef"
```

**‚úÖ Good:**
```javascript
const apiKey = process.env.API_KEY
```

### 2. Use .env.example Templates
```bash
# .env.example (safe to commit)
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
API_KEY=your-api-key-here
SECRET_KEY=your-secret-key-here

# .env (gitignored, contains real values)
DATABASE_URL=postgresql://admin:realpassword@prod.db.com:5432/proddb
API_KEY=sk-real-api-key-1234567890
SECRET_KEY=supersecretkey12345
```

### 3. Document Without Exposing
**‚ùå Bad:**
```markdown
# Setup
export DATABASE_URL="postgresql://admin:MyP@ssw0rd@prod.db.com:5432/scriptsensei"
```

**‚úÖ Good:**
```markdown
# Setup
1. Copy `.env.example` to `.env`
2. Fill in your credentials
3. Never commit `.env`
```

### 4. Use Secret Management Tools
- **Development:** `.env` files (gitignored)
- **Production:**
  - AWS Secrets Manager
  - Google Secret Manager
  - Azure Key Vault
  - HashiCorp Vault

### 5. Regular Security Audits
```bash
# Check for accidentally committed secrets
git log --all --full-history -- **/.env

# Scan for secrets in codebase
npm install -g @trufflesecurity/trufflehog
trufflehog filesystem . --json

# Or use git-secrets
git secrets --scan
```

---

## üîç Files Currently Protected

This `.gitignore` protects **225 lines** of patterns including:

### Critical Patterns:
1. **Environment files:** 12 patterns
2. **Secrets & Credentials:** 25 patterns
3. **API Keys:** 8 patterns
4. **Database Credentials:** 6 patterns
5. **Cloud Providers:** 3 directories
6. **SSH Keys:** 8 patterns
7. **Documentation:** 9 files
8. **Test Scripts:** 4 patterns

---

## üìù Creating Template Files

### For .env:
```bash
# Copy your .env and remove sensitive values
cp .env .env.example

# Edit .env.example to have placeholders
sed -i 's/=.*/=your-value-here/' .env.example

# Commit the template
git add .env.example
git commit -m "Add .env.example template"
```

### For README:
```bash
# Create template
cp README.md README.template.md

# Replace real values with placeholders
# Then commit template
git add README.template.md
```

---

## üöÄ Quick Commands

### Check what's ignored:
```bash
git status --ignored
```

### Test if a file is ignored:
```bash
git check-ignore -v <filename>
```

### List all ignored files:
```bash
git ls-files --others --ignored --exclude-standard
```

### Remove ignored files from repo:
```bash
git rm -r --cached .
git add .
git commit -m "Remove ignored files"
```

---

## üìö Additional Resources

- [GitHub's .gitignore templates](https://github.com/github/gitignore)
- [git-secrets tool](https://github.com/awslabs/git-secrets)
- [TruffleHog secret scanner](https://github.com/trufflesecurity/trufflehog)
- [OWASP Secret Management Guide](https://owasp.org/www-community/vulnerabilities/Use_of_hard-coded_credentials)

---

## ‚ö†Ô∏è Important Notes

1. **This .gitignore is comprehensive but not exhaustive** - Always review before committing
2. **README.md is currently ignored** - Uncomment in .gitignore if you want to commit it after removing secrets
3. **Test scripts are ignored** - Create template versions if needed for the team
4. **Local config files are safe** - They won't be committed

---

## üîÑ Maintenance

Update this `.gitignore` when:
- Adding new services with credentials
- New secret file patterns emerge
- Team adds new config file types
- Security requirements change

**Last Security Review:** November 5, 2025
**Next Review Due:** December 5, 2025
